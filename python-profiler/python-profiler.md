# Profiler for Python
## cProfile
cProfile is the core profiler for python. You can trigger it using:
```
python -m cProfile <python-code.py>
```
It prints out a table in stdout which for each function shows:
- How may time it's been called.
- Total time spent in the function itself.
- Time spent per function call in function itself (on average, I suppose).
- Cumulative time spent in this function and functions called from it.
- Cumulative time per each call of this function (on average, I suppose).

A sample output looks like this:
```
197 function calls (192 primitive calls) in 0.002 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
1    0.000    0.000    0.001    0.001 <string>:1(<module>)
1    0.000    0.000    0.001    0.001 re.py:212(compile)
1    0.000    0.000    0.001    0.001 re.py:268(_compile)
1    0.000    0.000    0.000    0.000 sre_compile.py:172(_compile_charset)
1    0.000    0.000    0.000    0.000 sre_compile.py:201(_optimize_charset)
4    0.000    0.000    0.000    0.000 sre_compile.py:25(_identityfunction)
3/1    0.000    0.000    0.000    0.000 sre_compile.py:33(_compile)
```

## Options
cProfile also has some other useful options. Here are a list of the most useful ones for me (for the full list, use python docs)
- `-o`: Gets a filename as input and stores the profiler output to it
```
python -m cProfile -o <output-file.prof> <python-code.py>
```
The output file is not necessarily in human-readable format.
- `-s`: Sorts the output based on the given input, which could be one of the following:
```
calls (call count)
cumulative (cumulative time)
cumtime (cumulative time)
file (file name)
filename (file name)
module (file name)
ncalls (call count)
pcalls (primitive call count)
line (line number)
name (function name)
nfl (name/file/line)
stdname (standard name)
time (internal time)
tottime (internal time)
```

## SnakeViz
This is a nice visualizer for cProfile's output. It can be installed through `pip` using:
```
pip install snakeviz
```
And its usage is like:
```
snakeviz <profiler-output.prof>
```
Note that `<profiler-output.prof>` file should be generated by using `-o` option of `cProfile`. It won't work if you just redirect stdout of running `cprofile` to a file with that name.

### Features
- It shows the profiler output in a table which can be re-sorted by any column.
- It visualizes the functions and the time spent in them by some concentric circle sectors or stacked rectangles which is super cool.
![alt text][circles-image]
![alt text][rectangles-image]

[circles-image]: figs/circles.png "Snakeviz visualization with concentric circles"
[rectangles-image]: figs/rectangles.png "Snakeviz visualization with stacked rectangles"